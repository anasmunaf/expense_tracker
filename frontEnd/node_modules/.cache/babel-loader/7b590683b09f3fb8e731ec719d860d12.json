{"ast":null,"code":"import _regeneratorRuntime from\"/home/anas/Documents/axiom-bootcamp/Tasks/expense_tracker/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/anas/Documents/axiom-bootcamp/Tasks/expense_tracker/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/anas/Documents/axiom-bootcamp/Tasks/expense_tracker/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/** @format */import React,{createContext,useReducer,useEffect}from\"react\";import axios from\"axios\";import AppReducer from\"./AppReducer\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={transaction:[]};export var ValueContext=/*#__PURE__*/createContext(initialState);export var ValueProvider=function ValueProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];function getTransaction(){return _getTransaction.apply(this,arguments);}function _getTransaction(){_getTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getTrans;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/api/v1/transactions/\");case 2:getTrans=_context.sent;dispatch({type:\"GET\",payload:getTrans.data.transaction});case 4:case\"end\":return _context.stop();}}},_callee);}));return _getTransaction.apply(this,arguments);}function newTransaction(_x){return _newTransaction.apply(this,arguments);}function _newTransaction(){_newTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newTrans){var addTrans;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://localhost:5000/api/v1/transactions/\",{text:newTrans.text,amount:newTrans.amount});case 2:addTrans=_context2.sent;dispatch({type:\"ADD\",payload:addTrans.data.transaction});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _newTransaction.apply(this,arguments);}function deleteTransaction(_x2){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var delTrans;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"http://localhost:5000/api/v1/transactions/\".concat(id));case 2:delTrans=_context3.sent;dispatch({type:\"DELETE\",payload:delTrans.data.transaction._id});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteTransaction.apply(this,arguments);}useEffect(function(){getTransaction();},[initialState.transaction]);return/*#__PURE__*/_jsx(ValueContext.Provider,{value:{transaction:state.transaction,getTransaction:getTransaction,newTransaction:newTransaction,deleteTransaction:deleteTransaction},children:children});};","map":{"version":3,"sources":["/home/anas/Documents/axiom-bootcamp/Tasks/expense_tracker/frontEnd/src/context/GlobalState.js"],"names":["React","createContext","useReducer","useEffect","axios","AppReducer","initialState","transaction","ValueContext","ValueProvider","children","state","dispatch","getTransaction","get","getTrans","type","payload","data","newTransaction","newTrans","post","text","amount","addTrans","deleteTransaction","id","delete","delTrans","_id"],"mappings":"wiBAAA,cAEA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,UAA/B,CAA2CC,SAA3C,KAA4D,OAA5D,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,C,2CACA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,WAAW,CAAE,EADM,CAArB,CAGA,MAAO,IAAMC,CAAAA,YAAY,cAAGP,aAAa,CAACK,YAAD,CAAlC,CAEP,MAAO,IAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBACrBR,UAAU,CAACG,UAAD,CAAaC,YAAb,CADW,4CACxCK,KADwC,iBACjCC,QADiC,yBAG9BC,CAAAA,cAH8B,oJAG7C,sKACyBT,CAAAA,KAAK,CAACU,GAAN,CACrB,4CADqB,CADzB,QACQC,QADR,eAIEH,QAAQ,CAAC,CAAEI,IAAI,CAAE,KAAR,CAAeC,OAAO,CAAEF,QAAQ,CAACG,IAAT,CAAcX,WAAtC,CAAD,CAAR,CAJF,sDAH6C,yDAU9BY,CAAAA,cAV8B,sJAU7C,kBAA8BC,QAA9B,0JACyBhB,CAAAA,KAAK,CAACiB,IAAN,CACrB,4CADqB,CAErB,CACEC,IAAI,CAAEF,QAAQ,CAACE,IADjB,CAEEC,MAAM,CAAEH,QAAQ,CAACG,MAFnB,CAFqB,CADzB,QACQC,QADR,gBAQEZ,QAAQ,CAAC,CAAEI,IAAI,CAAE,KAAR,CAAeC,OAAO,CAAEO,QAAQ,CAACN,IAAT,CAAcX,WAAtC,CAAD,CAAR,CARF,wDAV6C,yDAoB9BkB,CAAAA,iBApB8B,gKAoB7C,kBAAiCC,EAAjC,0JACyBtB,CAAAA,KAAK,CAACuB,MAAN,qDACwBD,EADxB,EADzB,QACQE,QADR,gBAIEhB,QAAQ,CAAC,CAAEI,IAAI,CAAE,QAAR,CAAkBC,OAAO,CAAEW,QAAQ,CAACV,IAAT,CAAcX,WAAd,CAA0BsB,GAArD,CAAD,CAAR,CAJF,wDApB6C,oDA0B7C1B,SAAS,CAAC,UAAM,CACdU,cAAc,GACf,CAFQ,CAEN,CAACP,YAAY,CAACC,WAAd,CAFM,CAAT,CAGA,mBACE,KAAC,YAAD,CAAc,QAAd,EACE,KAAK,CAAE,CACLA,WAAW,CAAEI,KAAK,CAACJ,WADd,CAELM,cAAc,CAAdA,cAFK,CAGLM,cAAc,CAAdA,cAHK,CAILM,iBAAiB,CAAjBA,iBAJK,CADT,UAQGf,QARH,EADF,CAYD,CAzCM","sourcesContent":["/** @format */\n\nimport React, { createContext, useReducer, useEffect } from \"react\";\nimport axios from \"axios\";\nimport AppReducer from \"./AppReducer\";\nconst initialState = {\n  transaction: [],\n};\nexport const ValueContext = createContext(initialState);\n\nexport const ValueProvider = ({ children }) => {\n  let [state, dispatch] = useReducer(AppReducer, initialState);\n\n  async function getTransaction() {\n    const getTrans = await axios.get(\n      \"http://localhost:5000/api/v1/transactions/\",\n    );\n    dispatch({ type: \"GET\", payload: getTrans.data.transaction });\n  }\n\n  async function newTransaction(newTrans) {\n    const addTrans = await axios.post(\n      \"http://localhost:5000/api/v1/transactions/\",\n      {\n        text: newTrans.text,\n        amount: newTrans.amount,\n      },\n    );\n    dispatch({ type: \"ADD\", payload: addTrans.data.transaction });\n  }\n  async function deleteTransaction(id) {\n    const delTrans = await axios.delete(\n      `http://localhost:5000/api/v1/transactions/${id}`,\n    );\n    dispatch({ type: \"DELETE\", payload: delTrans.data.transaction._id });\n  }\n  useEffect(() => {\n    getTransaction();\n  }, [initialState.transaction]);\n  return (\n    <ValueContext.Provider\n      value={{\n        transaction: state.transaction,\n        getTransaction,\n        newTransaction,\n        deleteTransaction,\n      }}\n    >\n      {children}\n    </ValueContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}